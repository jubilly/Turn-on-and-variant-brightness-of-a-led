<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <title>Digital</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <meta charset="UTF-8">
    <link href="css/index.css" rel="stylesheet">
</head>
<body>
    <div class="principal">
        <td><label>Entrada(s): <input type="numeric" id="quantidade" /></label> <button id="button">Gerar</button></td>
        <script src='digital.js'></script>
    </div>
            
    <div id="secundaria">
      <!-- <button id="lampada" data-state="" alt="">Led 01 </button>--> 
    
    </div>   

    <script src="https://www.gstatic.com/firebasejs/5.8.4/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.8.4/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.8.4/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.8.4/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.8.4/firebase-messaging.js"></script>
    </div>
    <script>
       var config = {
              apiKey: "AIzaSyAWUY7Gktc6TPJugr0vQQ-RZ4XCF_EhBJM",
              authDomain: "iot-tutorial-c4c86.firebaseapp.com",
              databaseURL: "https://iot-tutorial-c4c86.firebaseio.com",
              storageBucket: "iot-tutorial-c4c86.appspot.com",
        };
        firebase.initializeApp(config);
        let lampada = document.querySelector('#lampada');
        lampada.addEventListener('click', ()=>{
            let estado = lampada.getAttribute('data-state');
            console.log(lampada);
            if(estado == 'off'){
                firebase.database().ref('lampada').set('on');
            }else{
                firebase.database().ref('lampada').set('off');
            }
        });
        firebase.database().ref('lampada').on('value', snapshot =>{
            let l = snapshot.val();
            if(l == 'on'){
                lampada.setAttribute('id', 'on');
                lampada.setAttribute('data-state', 'on');
            }else{
                lampada.setAttribute('id', 'off');
                lampada.setAttribute('data-state', 'off');
            }
        })
    </script>
</body>

</html>